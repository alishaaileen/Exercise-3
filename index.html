<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Star Wars Characters</title>

    <!-- CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css">
    <link rel="stylesheet" href="style.css">

    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
  </head>
  <body>
  <section class="section">
    <div class="container">
      <h1 class="title is-1 has-text-centered has-text-white">
        Star Wars Planets
      </h1>

      <div class="search">
        <div class="field">
          <p class="control has-icons-left">
            <input id="input" class="input" type="text" placeholder="Searching for a spesific one?">
            <span class="icon is-small is-left">
              <i class="fas fa-search"></i>
            </span>
          </p>
        </div>
      </div>

      <div style="overflow-x: scroll;">
        <table id="table" class="table"></table>
      </div>
      
    </div>
  </section>

  <script src="main.js"></script>
  <script>
    (async function () {
      let data = await fetchData()
      let inputSearch = document.getElementById('input')
      let table = document.getElementById('table')


      inputSearch.addEventListener('input', async (event) => {
        let data2 = await fetchData()
        let filteredData = data2.results
        filteredData.toLowerCase()

        if(event.target.value) {
          filteredData = filteredData.filter(item => item.name === event.target.value)
        }

        makeTable(table, filteredData)
      })

      makeTable(table, data.results)
    })()
  </script>
  </body>
</html>