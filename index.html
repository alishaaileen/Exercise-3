<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Star Wars Characters</title>

    <!-- CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css">
    <link rel="stylesheet" href="style.css">

    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
  </head>
  <body>
  <section class="section">
    <div class="container">
      <h1 class="title is-1 has-text-centered has-text-white">
        Star Wars Planets
      </h1>

      <div class="search">
        <div class="field">
          <p class="control has-icons-left">
            <input id="input" class="input" type="text" placeholder="Searching for a spesific one?">
            <span class="icon is-small is-left">
              <i class="fas fa-search"></i>
            </span>
          </p>
        </div>
      </div>

      <div style="overflow-x: scroll;">
        <table id="table" class="table"></table>
      </div>

    </div>
  </section>

  <section class="section">
    <div class="container">
      <div class="socmeds">
        <div class="level">
          <div class="level-item">
            <div class="socmed">
              <a href="https://github.com/alishaileen" target="_blank">
                <span class="icon is-medium" style="color:#bebebe;">
                  <i class="fab fa-2x fa-github"></i>
                </span>
              </a>
            </div>
          </div>
        </div>
      </div>

      <p class="subtitle is-6 has-text-centered has-text-white" style="margin-top: 5px;">
        Thanks a bunch :)
      </p>
    </div>
  </section>

  <script src="main.js"></script>
  <script>
    (async function () {
      let data = await fetchData()
      let inputSearch = document.getElementById('input')
      let table = document.getElementById('table')

      inputSearch.addEventListener('input', async (event) => {
        let data2 = await fetchData()
        let filteredData = data2.results

        if(event.target.value) { // jika ada input search terisi
          let length = event.target.value.length
          
          filteredData = filteredData.filter(item => item.name.toLowerCase().substr(0, length) === event.target.value.toLowerCase())
        }

        makeTable(table, filteredData)
      })

      makeTable(table, data.results)
    })()
  </script>
  </body>
</html>